#include <IF_I2C_SPI_EN_IFS_SYNC.h>
#include <LED_Animation.h>
#include <LP586x.h>
#include <ti/devices/msp432p4xx/driverlib/driverlib.h>
/* Standard Includes */
#include <stdint.h>
#include <stdbool.h>

void Animation_Start(int Animation_GS[][11][6][3])
{

    int Num, Dot;
    int frame;

    frame = (sizeof(Animation_GS)) / (sizeof(Animation_GS[0][0][0][0])) / 66 / 3;

    while (1)
    {
        for (Num=0; Num<frame; Num++)
        {
            for (Dot=0; Dot<66; Dot++)
            {
                if ((Animation_GS[Num][Dot/6][Dot%6][0] != Animation_GS[Num-1][Dot/6][Dot%6][0]) ||
                    (Animation_GS[Num][Dot/6][Dot%6][1] != Animation_GS[Num-1][Dot/6][Dot%6][1]) ||
                    (Animation_GS[Num][Dot/6][Dot%6][2] != Animation_GS[Num-1][Dot/6][Dot%6][2]))
                Device_LED_Dot_Brightness_8bit(Dot,
                                               Animation_GS[Num][Dot/6][Dot%6][0],
                                               Animation_GS[Num][Dot/6][Dot%6][1],
                                               Animation_GS[Num][Dot/6][Dot%6][2]);
            }
            Send_SYNC();
            //delay_ms(1);
        }
    }
}

void Rainbow_test()
{
    int i, j;
    int GS_Rainbow_R[] = {
                          255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,
                          255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,
                          255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,
                          255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,
                          255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,
                          255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,
                          250,238,228,217,207,198,188,179,170,162,154,145,137,130,123,116,
                          109,103, 97, 91, 85, 80, 75, 70, 65, 60, 56, 62, 48, 44, 40, 37,
                           34, 31, 28, 25, 23, 21, 19, 17, 15, 13, 11, 10,  9,  8,  7,  6,
                            5,  5,  4,  4,  4,  3,  3,  3,  2,  2,  2,  2,  1,  1,  1,  1,
                            0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
                            0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
                            1,  1,  1,  1,  2,  2,  2,  2,  3,  3,  3,  4,  4,  4,  5,  5,
                            6,  7,  8,  9, 10, 11, 13, 15, 17, 19, 21, 23, 25, 28, 31, 34,
                           37, 40, 44, 48, 62, 56, 60, 65, 70, 75, 80, 85, 91, 97,103,109,
                          116,123,130,137,145,154,162,170,179,188,198,207,217,228,238,250
                         };

    int GS_Rainbow_G[] = {
                            0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
                            0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
                            1,  1,  1,  1,  2,  2,  2,  2,  3,  3,  3,  4,  4,  4,  5,  5,
                            6,  7,  8,  9, 10, 11, 13, 15, 17, 19, 21, 23, 25, 28, 31, 34,
                           37, 40, 44, 48, 52, 56, 60, 65, 70, 75, 80, 85, 91, 97,103,109,
                          116,123,130,137,145,154,162,170,179,188,198,207,217,228,238,250,
                          255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,
                          255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,
                          255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,
                          255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,
                          250,238,228,217,207,198,188,179,170,162,154,145,137,130,123,116,
                          109,103, 97, 91, 85, 80, 75, 70, 65, 60, 56, 52, 48, 44, 40, 37,
                           34, 31, 28, 25, 23, 21, 19, 17, 15, 13, 11, 10,  9,  8,  7,  6,
                            5,  5,  4,  4,  4,  3,  3,  3,  2,  2,  2,  2,  1,  1,  1,  1,
                            0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
                            0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
                         };

    int GS_Rainbow_B[] = {
                          250,238,228,217,207,198,188,179,170,162,154,145,137,130,123,116,
                          109,103, 97, 91, 85, 80, 75, 70, 65, 60, 56, 52, 48, 44, 40, 37,
                           34, 31, 28, 25, 23, 21, 19, 17, 15, 13, 11, 10,  9,  8,  7,  6,
                            5,  5,  4,  4,  4,  3,  3,  3,  2,  2,  2,  2,  1,  1,  1,  1,
                            0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
                            0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
                            0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
                            0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
                            1,  1,  1,  1,  2,  2,  2,  2,  3,  3,  3,  4,  4,  4,  5,  5,
                            6,  7,  8,  9, 10, 11, 13, 15, 17, 19, 21, 23, 25, 28, 31, 34,
                           37, 40, 44, 48, 52, 56, 60, 65, 70, 75, 80, 85, 91, 97,103,109,
                          116,123,130,137,145,154,162,170,179,188,198,207,217,228,238,250,
                          255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,
                          255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,
                          255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,
                          255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
                         };
    int Rainbow_GS_number = (sizeof(GS_Rainbow_R)) / (sizeof(GS_Rainbow_R[0]));
    while (1)
    {
        int x=2; // Color change step
        for (i=0; i<Rainbow_GS_number; i++)
        {
            for (j=0; j<66; j++)
                Device_LED_Dot_Brightness_8bit(j,
                                               GS_Rainbow_R[(i+x*j) % Rainbow_GS_number],
                                               GS_Rainbow_G[(i+x*j) % Rainbow_GS_number],
                                               GS_Rainbow_B[(i+x*j) % Rainbow_GS_number]);
            Send_SYNC();
        }
    }
}


void Count(int Bri,
           int R,
           int G,
           int B)
{

    int Count_GS[][11][6][3] = {
                                    { // frame_0
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} }, // line_0
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} }, // line_1
                                      { {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_2
                                      { {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_3
                                      { {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_4
                                      { {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_5
                                      { {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_6
                                      { {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_7
                                      { {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_8
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} }, // line_9
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} } // line_10
                                    },

                                    { // frame_1
                                      { {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0} }, // line_0
                                      { {0,0,0}, {1,1,1}, {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0} }, // line_1
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0} }, // line_2
                                      { {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0} }, // line_3
                                      { {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0} }, // line_4
                                      { {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0} }, // line_5
                                      { {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0} }, // line_6
                                      { {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0} }, // line_7
                                      { {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0} }, // line_8
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} }, // line_9
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} } // line_10
                                    },

                                    { // frame_2
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} }, // line_0
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} }, // line_1
                                      { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_2
                                      { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_3
                                      { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_4
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} }, // line_5
                                      { {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0} }, // line_6
                                      { {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0} }, // line_7
                                      { {1,1,1}, {1,1,1}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0} }, // line_8
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} }, // line_9
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} } // line_10
                                    },

                                    { // frame_3
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} }, // line_0
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} }, // line_1
                                      { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_2
                                      { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_3
                                      { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_4
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} }, // line_5
                                      { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_6
                                      { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_7
                                      { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {1,1,1}, {1,1,1} }, // line_8
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} }, // line_9
                                      { {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1}, {1,1,1} } // line_10
                                    },

    };

    int Num, i, Dot;

    for (Num=3; Num>0; Num--)
    {
        for (i=0; i<Bri/2; i++)
        {
            for (Dot=0; Dot<66; Dot++)
                Device_LED_Dot_Brightness_8bit(Dot,
                                               Count_GS[Num][Dot/6][Dot%6][0] * i * 2,
                                               Count_GS[Num][Dot/6][Dot%6][1] * i * 2,
                                               Count_GS[Num][Dot/6][Dot%6][2] * i * 2);
            Send_SYNC();
        }

        delay_ms(500);

        for (i=Bri/2; i>=0; i--)
        {
            for (Dot=0; Dot<66; Dot++)
                Device_LED_Dot_Brightness_8bit(Dot,
                                               Count_GS[Num][Dot/6][Dot%6][0] * i * 2,
                                               Count_GS[Num][Dot/6][Dot%6][1] * i * 2,
                                               Count_GS[Num][Dot/6][Dot%6][2] * i * 2);
            Send_SYNC();
        }

        delay_ms(500);

    }

}

